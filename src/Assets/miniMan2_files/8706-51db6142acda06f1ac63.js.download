(self.webpackChunkpixlee_photos=self.webpackChunkpixlee_photos||[]).push([[8706],{83322:(e,t,i)=>{var n=i(54821).Z;Pixlee.module("Concerns",(function(e,t,i,o,s){e.AccessibilityHelpers={focusableElementsArray:["a[href]","area[href]","button:not([disabled])","embed","iframe",'input:not([type="hidden"]):not([tabindex="-1"]):visible',"object","select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"]):visible'],initialize:function(){document.body.onload=function(){document.body.addEventListener("mousedown",(function(e){document.body.classList.contains("using-keyboard")&&document.body.classList.remove("using-keyboard"),document.body.classList.add("using-mouse")})),document.body.addEventListener("keydown",(function(e){document.body.classList.contains("using-mouse")&&document.body.classList.remove("using-mouse"),document.body.classList.add("using-keyboard")}))}},onShow:function(){this.preventScrollPolyfill()},createFocusIndex:function(e){var t=[];return n.each(e,function(e){var i=s(e).find(this.focusableElementsArray.join()),n=Array.prototype.slice.call(i);t.push(n)}.bind(this)),[].concat.apply([],t)},cycleTab:function(e,t,i){n.isFalsy(e.shiftKey)&&i===t.length-1&&(e.preventDefault(),t[0].focus()),n.isTruthy(e.shiftKey)&&0===i&&(e.preventDefault(),t[t.length-1].focus())},mapKeyboardInteractionToElements:function(e){13===e.keyCode&&(e.preventDefault(),e.target.click())},setTabindexOfElements:function(e,t){n.each(e,(function(e){s(e).attr("tabindex",t.toString())}))},preventScrollPolyfill:function(){if("undefined"!==typeof window&&"undefined"!==typeof document&&"undefined"!==typeof HTMLElement){var e=!1;try{var t=document.createElement("div");t.addEventListener("focus",(function(e){e.preventDefault(),e.stopPropagation()}),!0),t.focus(Object.defineProperty({},"preventScroll",{get:function(){e=!0}}))}catch(i){}if(void 0===HTMLElement.prototype.nativeFocus&&!e){HTMLElement.prototype.nativeFocus=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(e){if(e&&e.preventScroll){var t=function(e){for(var t=e.parentNode,i=[],n=document.scrollingElement||document.documentElement;t&&t!==n;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&i.push([t,t.scrollTop,t.scrollLeft]),t=t.parentNode;return t=n,i.push([t,t.scrollTop,t.scrollLeft]),i}(this);this.nativeFocus(),function(e){for(var t=0;t<e.length;t++)e[t][0].scrollTop=e[t][1],e[t][0].scrollLeft=e[t][2];e=[]}(t)}else this.nativeFocus()}}}}}}))},99046:(e,t,i)=>{var n=i(54821).Z;Pixlee.module("Concerns",(function(e,t,i,o,s){e.designEditorCollectionHelpers={initialize:function(){n.isTruthy(gon.previewMode)&&(this.displayOptions=t.request("get:display:options"),this.listenTo(this.displayOptions,{"change:reviewOptions.lightboxReviews":this.refreshWidget,"change:reviewOptions.frequency":this.refreshWidget,"change:pageSize":this.refreshWidget,"change:carouselOptions.smoothSwiping":this.refreshWidget}))},refreshWidget:function(e){gon.activeReviewIds=[],this.closeLightbox(),n.isArray(this.swiperQueue)?(this.options.photosCollection.reset(),this.updateSwipingMode(e.get("carouselOptions.smoothSwiping"))):this.collectionQueue&&this.collectionQueue!==this.collection?this.collectionQueue.fetch({reset:!0}):this.collection.fetch({reset:!0})},closeLightbox:function(){window.parent.postMessage(JSON.stringify({name:"pixlee:close:lightbox",type:"action",source:"lightbox",destination:"all",data:{}}),"*")}}}))},27163:(e,t,i)=>{var n=i(54821).Z;Pixlee.module("Concerns",(function(e,t,i,o,s){e.LayoutHelpers={initialize:function(){this.displayOptions=t.request("get:display:options"),gon.previewMode&&this.listenForMessage(),this.displayOptions.get("emitInteractionEvents")&&this.emitInteractionEvents()},listenForMessage:function(){var e=n.throttle((function(e){try{var t=JSON.parse(e.data);"pixlee:css:generated"===t.name&&s("#header_banner_image img").attr("src",t.data.displayOptions.headerOptions.bannerImage||"")}catch(i){return}}),1e3);window.addEventListener("message",e,!1)},emitInteractionEvents:function(){this.$el.on("click touchstart touchmove touchend wheel mousemove",this.postInteractionEventMessage)},postInteractionEventMessage:function(e){var t={name:"pixlee:interaction:event",data:{frame:"widget",type:e.type,nodeName:e.target.nodeName,id:e.target.id,className:e.target.className},destination:"all",source:"widget",type:"relay"};window.parent.postMessage(JSON.stringify(t),"*")},templateHelpers:function(){var e=this.displayOptions.get("headerOptions"),t=this.displayOptions.get("showSkipContentLinks");return{getLayoutClass:function(){return n.isFalsy(e)?"":e.layout},isHeaderV2:function(){return!n.isFalsy(e)&&Object.keys(e).length>1},isTile:function(){return"tile"===e.layout},checkSkipContentLinks:function(){return t}}}}}))},82577:(e,t,i)=>{var n=i(54821).Z;Pixlee.module("Concerns",(function(e,t,i,o,s){e.ReviewHelpers={templateHelpers:{pluckReviews:function(e){var t=e.reviews_info?e.reviews_info.reviews:[];return n.map(t,(function(t){return t.productImage=e.image_thumb||e.image,t.productName=e.title,t}))},ensureUniqueReviews:function(e){return n.contains(gon.activeReviewIds,e.id)},selectReview:function(){var e=this.products,t={id:0,score:0,title:"No Review",content:"No Review",user_name:""};if(e.length){gon.activeReviewIds=gon.activeReviewIds||[];var i=n.reject(n.flatten(n.map(e,this.pluckReviews)),this.ensureUniqueReviews),o=Math.floor(Math.random()*i.length);i[o]&&(t=i[o]),gon.activeReviewIds.length>30&&(gon.activeReviewIds=[]),gon.activeReviewIds=gon.activeReviewIds.concat(t.id)}this.selectedReview=t},getReview:function(){return n.isFalsy(this.selectedReview)&&this.selectReview(),this.selectedReview}}}}))},23901:(e,t,i)=>{var n=i(54821).Z;Pixlee.module("Concerns",(function(e,t,i,o,s){var a=Routes.social_share_param();e.socialShareHelpers={onShow:function(){var e=function(e){var i;if(e.data){try{i=JSON.parse(e.data)}catch(o){return}if(i.name&&"pixlee:trigger:share:to:social"===i.name){var n=t.request("get:new:photo",i.data.photoJson);switch(i.data.source){case"facebook":this.handleFacebookShare(n,i.data.url);break;case"twitter":this.handleTwitterShare(n,i.data.url);break;case"pinterest":this.handlePinterestShare(n,i.data.url);break;case"tumblr":this.handleTumblrShare(n,i.data.url)}}}}.bind(this);window.addEventListener("message",e,!1)},insertParam:function(e,t,i){if(e.indexOf(t+"=")>=0){var n=e.substring(0,e.indexOf(t)),o=e.substring(e.indexOf(t)).substring(e.indexOf("=")+1);e=n+t+"="+i+(o=o.indexOf("&")>=0?o.substring(o.indexOf("&")):"")}else e.indexOf("?")<0?e+="?"+t+"="+i:e+="&"+t+"="+i;return e},generateUtmTags:function(e,i,o){return n.isEmpty(i)||(e=n.isTruthy(o)?this.insertParam(e,"utm_source",t.request("encode:utf8",o)):e,e=n.isTruthy(i.medium)?this.insertParam(e,"utm_medium",t.request("encode:utf8",i.medium)):e,e=n.isTruthy(i.campaign)?this.insertParam(e,"utm_campaign",t.request("encode:utf8",i.campaign)):e,e=n.isTruthy(i.term)?this.insertParam(e,"utm_term",t.request("encode:utf8",i.term)):e,e=n.isTruthy(i.content)?this.insertParam(e,"utm_content",t.request("encode:utf8",i.content)):e),e},handlePinterestShare:function(e,i){var o=gon.display_options&&gon.display_options.utm?gon.display_options.utm:{},s=this.getTitle(e),a=this.insertParam(i,"pixlee_album_photo_id",e.get("album_photo_id"));a=this.generateUtmTags(a,o,"pinterest"),s=n.isFalsy(s)?gon.current_album.campaign?"I just voted for my favorite photo!":"Check this photo out!":t.request("decode:utf8",s);var r="https://pinterest.com/pin/create/button/?url="+t.request("encode:utf8",a)+"&media="+t.request("encode:utf8",t.request("get:photo:tumbnail",e))+"&description="+t.request("encode:utf8",s);r=this.generateUtmTags(r,o,"pinterest"),window.open(r,"_blank","height=450,width=600,toolbar=0,resizable=0"),this.trackShare(e.get("album_photo_id"),a,"pinterest",void 0,a,o)},handleTumblrShare:function(e,i){var o=gon.display_options&&gon.display_options.utm?gon.display_options.utm:{},s=this.getTitle(e),a=this.insertParam(i,"pixlee_album_photo_id",e.get("album_photo_id")),r=e.get("short_share_url")||a;r=this.generateUtmTags(r,o,"tumblr"),a=this.generateUtmTags(a,o,"tumblr"),s=n.isFalsy(s)?gon.current_album.campaign?"I just voted for my favorite photo!":"Check this photo out!":t.request("decode:utf8",s);var u="https://www.tumblr.com/share/photo?clickthru="+t.request("encode:utf8",r)+"&source="+t.request("encode:utf8",t.request("get:photo:tumbnail",e))+"&caption="+t.request("encode:utf8",s);u=this.generateUtmTags(u,o,"tumblr"),window.open(u,"_blank","height=450,width=600,toolbar=0,resizable=0"),this.trackShare(e.get("album_photo_id"),a,"tumblr",void 0,r,o)},handleFacebookShare:function(e,i){var o=gon.display_options&&gon.display_options.utm?gon.display_options.utm:{},s=this.getTitle(e);n.isFalsy(s)&&(s=gon.current_album.campaign?"I just voted for my favorite photo!":"Check this photo out!");var r=this.insertParam(i,"pixlee_album_photo_id",e.get("album_photo_id")),u=e.attributes.album_photo_id,l=gon.distinct_user_hash,c=window.location.protocol+"//"+window.location.host,d=a,p=gon.current_album?gon.current_album.title:"";d=this.insertParam(d,"descr",t.request("encode:utf8",t.request("encode:utf8",s))),d=this.insertParam(d,"title",t.request("encode:utf8",t.request("decode:utf8",p))),d=this.insertParam(d,"img",t.request("encode:utf8",t.request("get:photo:tumbnail",e))),d=this.insertParam(d,"shareLink",t.request("encode:utf8",r)),d=this.insertParam(d,"album_photo_id",t.request("encode:utf8",u)),d=this.insertParam(d,"fingerprint",t.request("encode:utf8",l)),d=this.insertParam(d,"post_id",t.request("encode:utf8",null)),d=this.insertParam(d,"type","image"),d=this.insertParam(d,"source","facebook");var h=c+(d=this.generateUtmTags(d,o,"facebook"));window.open(h,"_blank","height=450,width=600,toolbar=0,resizable=0")},handleTwitterShare:function(e,i){var o=gon.display_options&&gon.display_options.utm?gon.display_options.utm:{},s=e.get("user_name"),r=this.getTitle(e);n.isFalsy(r)&&(r=gon.current_album.campaign?"I just voted for my favorite photo!":"Check this photo out!");var u=this.insertParam(i,"pixlee_album_photo_id",e.get("album_photo_id")),l=e.attributes.album_photo_id,c=gon.distinct_user_hash,d=window.location.protocol+"//"+window.location.host,p=a,h=gon.current_album?gon.current_album.title:"";p=this.insertParam(p,"descr",t.request("encode:utf8",t.request("encode:utf8",r))),p=this.insertParam(p,"title",t.request("encode:utf8",t.request("decode:utf8",h))),p=this.insertParam(p,"img",t.request("encode:utf8",t.request("get:photo:tumbnail",e))),p=this.insertParam(p,"shareLink",t.request("encode:utf8",u)),p=this.insertParam(p,"album_photo_id",t.request("encode:utf8",l)),p=this.insertParam(p,"fingerprint",t.request("encode:utf8",c)),p=this.insertParam(p,"post_id",t.request("encode:utf8",null)),p=this.insertParam(p,"type","image"),p=this.insertParam(p,"author",s),p=this.insertParam(p,"source","twitter");var g=d+(p=this.generateUtmTags(p,o,"twitter"));window.open(g,"_blank","height=450,width=600,toolbar=0,resizable=0")},trackShare:function(e,t,i,n,o,a){clearTimeout(this.shareTimer),this.shareTimer=setTimeout((function(){var r;r="undefined"==typeof n?null:n,parseInt(e)>0&&s.ajax({url:"/social/share",type:"post",data:{album_photo_id:parseInt(e),fingerprint:gon.distinct_user_hash,link:t,shortlink:o,provider:i,post_id:r,utm_medium:a.medium||"",utm_campaign:a.campaign||"",utm_term:a.term||"",utm_content:a.content||""},dataType:"json",success:function(e){e.error_code}})}),2e3)},getTitle:function(e){return gon.display_options.options&&!gon.display_options.options.showCaptions?"":n.isTruthy(e.attributes.title)?e.attributes.title:n.isTruthy(e.attributes.album_title)?e.attributes.album_title:!!n.isTruthy(e.attributes.photo_title)&&e.attributes.photo_title}}}))},63444:(e,t,i)=>{"use strict";i.r(t);var n=i(26978),o=i(54821).Z;Pixlee.module("Concerns",(function(e,t,i,s,a){e.StandaloneHeaderHelpers={ui:{standaloneContainer:"#standalone_header",brandLogo:"#brand_logo",brandImageLink:"#banner_image_link",instagramProfile:"#instagram_profile",twitterProfile:"#twitter_profile",pinterestProfile:"#pinterest_profile",facebookProfile:"#facebook_profile",socialIcons:".social_profile_icons"},events:{"click @ui.brandLogo":"trackAnalytics","click @ui.brandImageLink":"trackAnalytics","click @ui.socialIcons":"trackAnalytics"},initialize:function(){this.displayOptions=t.request("get:display:options"),this.listenTo(this.displayOptions,{"change:standaloneOptions.bannerImage_showHide":this.render,"change:standaloneOptions.logoImage_showHide":this.render,"change:standaloneOptions.logoImage_backgroundImage":this.render,"change:standaloneOptions.bannerImage_backgroundImage":this.render,"change:standaloneOptions.logoImage_input":this.render,"change:standaloneOptions.bannerImage_input":this.render})},onShow:function(){o.each(["instagram","twitter","pinterest","facebook"],this.showSocialIcon.bind(this))},trackAnalytics:function(e){t.execute("standalone:click:through",a(e.currentTarget).attr("id"))},showSocialIcon:function(e){var t=e+"Profile";o.isFalsy(this.displayOptions.get(e+"_username"))||this.ui[t].css("display","inline-block")},templateHelpers:function(){var e=this;return{shouldShowBannerImage:function(){return e.displayOptions.get("standaloneOptions.bannerImage_showHide")},shouldShowLogoImage:function(){return e.displayOptions.get("standaloneOptions.logoImage_showHide")},isStandalone:function(){return"standalone"===e.displayOptions.get("channel")},getLogoImage:function(){return o.isFalsy(e.displayOptions.get("standaloneOptions.logoImage_backgroundImage"))?"":"background-image: url("+e.displayOptions.get("standaloneOptions.logoImage_backgroundImage")+")"},getLogoRedirectURL:function(){return e.displayOptions.get("standaloneOptions.logoImage_input")||""},getBannerImage:function(){return o.isFalsy(e.displayOptions.get("standaloneOptions.bannerImage_backgroundImage"))?gon.previewMode?"":"display:none;":"background-image: url("+e.displayOptions.get("standaloneOptions.bannerImage_backgroundImage")+")"},getBannerImageURL:function(){return o.isFalsy(e.displayOptions.get("standaloneOptions.bannerImage_backgroundImage"))?"":e.displayOptions.get("standaloneOptions.bannerImage_backgroundImage")},getBannerRedirectURL:function(){return e.displayOptions.get("standaloneOptions.bannerImage_input")||""},getInstagramURL:function(){var t=e.displayOptions.get("instagram_username");return o.isFalsy(t)||o.isFalsy(t.user_name)?"":"https://www.instagram.com/"+t.user_name},getTwitterURL:function(){var t=e.displayOptions.get("twitter_username");return o.isFalsy(t)||o.isFalsy(t.user_name)?"":"https://www.twitter.com/"+t.user_name},getPinterestURL:function(){var t=e.displayOptions.get("pinterest_username");return o.isFalsy(t)||o.isFalsy(t.user_name)?"":"https://www.pinterest.com/"+t.user_name},getFacebookURL:function(){var t=e.displayOptions.get("facebook_username");return o.isFalsy(t)||o.isFalsy(t.social_id)?"":"https://www.facebook.com/"+t.social_id},getLayoutClass:function(){return e.displayOptions.get("headerOptions").layout},getButtonClass:function(){return e.displayOptions.get("headerOptions").button},getHeaderTitle:function(){return e.displayOptions.get("headerOptions").showTitle?e.displayOptions.get("headerOptions").title:""},showDescription:function(){return e.displayOptions.get("headerOptions").showDescription},isDefaultHeaderDescription:function(){return e.displayOptions.get("headerOptions").description===I18n.translations.en.widget.header.description},getHeaderDescription:function(){return e.displayOptions.get("headerOptions").description},isTile:function(){return"tile"===e.displayOptions.get("headerOptions").layout},getWidgetType:function(){return e.displayOptions.get("type")},isHeaderV2:function(){var t=e.displayOptions.get("headerOptions");return!o.isFalsy(t)&&Object.keys(t).length>1},isViewGallery:function(){return!o.isFalsy(e.displayOptions.get("headerOptions"))&&e.displayOptions.get("headerOptions").showViewGallery},isDefaultViewGalleryText:function(){return e.displayOptions.get("headerOptions").viewGalleryTitle===I18n.translations.en.widget.header.view_gallery},getViewGalleryText:function(){return e.displayOptions.get("headerOptions").viewGalleryTitle},getViewGalleryUrl:function(){return e.displayOptions.get("headerOptions").viewGalleryUrl},getHeaderBannerImage:function(){return e.displayOptions.get("headerOptions").bannerImage||""},decode_utf8:n.decodeUtf8,hasTOS:t.hasTOS}}}}))}}]);
//# sourceMappingURL=8706-51db6142acda06f1ac63.js.map