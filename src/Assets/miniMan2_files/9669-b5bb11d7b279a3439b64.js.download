(self.webpackChunkpixlee_photos=self.webpackChunkpixlee_photos||[]).push([[9669],{30493:module=>{module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div id="loader"></div>';return __p}},4674:module=>{module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div id="load_more_container">\n\t<a id="load_more" class="load_button">load more content</a>\n</div>';return __p}},6322:module=>{module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<a id="load_more" class="load_more_spinner"></a>';return __p}},49781:module=>{module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div id="photos_region"></div>\n<div id="photowall_footer_region"></div>';return __p}},96701:(e,o,t)=>{var i=t(54821).Z;Pixlee.module("Components.Loading",(function(e,o,t,n,l){e.LoadingController=o.Controllers.Application.extend({initialize:function(e){var o,t=e.view,n=e.config;switch(n=i.isBoolean(n)?{}:n,i.defaults(n,{loadingType:"spinner",entities:this.getEntities(t),debug:!1}),n.loadingType){case"opacity":this.region.currentView.$el.css("opacity",.5);break;case"spinner":case"analytics_spinner":o=this.getLoadingView(),this.show(o);break;default:throw new Error("Invalid loadingType")}this.showRealView(t,o,n)},showRealView:function(e,t,i){var n=this;o.execute("when:fetched",i.entities,(function(){switch(i.loadingType){case"opacity":n.region.currentView.$el.removeAttr("style");break;case"spinner":n.region.currentView!==t&&e.destroy()}i.debug||e.isDestroyed||n.show(e)}))},getEntities:function(e){return i.chain(e).pick("model","collection").toArray().compact().value()},getLoadingView:function(){return new e.LoadingView},getAnalyticsLoadingView:function(){return new e.AnalyticsLoadingView},getSpinJsView:function(){return new e.SpinJsView}}),o.commands.setHandler("show:loading",(function(o,t){return new e.LoadingController({view:o,region:t.region,config:t.loading})}))}))},82318:(e,o,t)=>{Pixlee.module("Components.Loading",(function(e,o,i,n,l){e.LoadingView=o.Views.ItemView.extend({template:t(30493),id:"loading_container"}),e.AnalyticsLoadingView=o.Views.ItemView.extend({template:!1,className:"loading_data"})}))},21721:e=>{function o(e){var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}o.keys=()=>[],o.resolve=o,o.id=21721,e.exports=o},84974:(e,o,t)=>{var i=t(54821).Z;Pixlee.module("Components.Photowall",(function(e,o,t,n,l){e.Controller=o.Controllers.Application.extend({initialize:function(e){var o=this;this.collectionView=e.view,this.photowallLayout=this.getPhotowallLayout(),this.loadMoreButton=this.getLoadMoreButton(),this.loadMoreLoadingView=this.getLoadMoreLoadingView(),this.collectionView.collection.on("sync",(function(e,o,t){gon.sortType=o.sortType})),this.listenTo(this.photowallLayout,{show:this.onLayoutShow,"load:more:clicked":this.onLoadMoreCLick,"clear:filter":this.resetCollection});var t=i.debounce(this.onFilterSortChange,800);this.collectionView.collection.sort&&this.collectionView.collection.sort.on("change",t,this),this.collectionView.collection.filter&&this.collectionView.collection.filter.on("change",t,this);this.listenTo(this.photowallLayout,"destroy",(function(){this.destroy(),o.loadMoreButton.destroy(),o.loadMoreLoadingView.destroy()}),this)},getPhotowallLayout:function(o){var t;return o=o||{},t=this.getDefaultConfig(i.result(this.contentView,"photowall")),i.extend(t,o),new e.Layout({config:t,collectionView:this.collectionView,collection:this.collectionView.collection})},getLoadMoreButton:function(){return new e.LoadMoreButton},getDefaultConfig:function(e){return e=e||{},i.defaults(e,{loadMoreFooter:!0})},getLoadMoreLoadingView:function(){return new e.LoadMoreLoadingView},onLayoutShow:function(){this.show(this.collectionView,{region:this.photowallLayout.photosRegion,loading:!0})},onLoadMoreCLick:function(){this.loadMoreLoadingView.isDestroyed&&(this.loadMoreLoadingView=this.getLoadMoreLoadingView()),this.photowallLayout.isDestroyed&&(this.photowallLayout=this.getPhotowallLayout()),this.show(this.loadMoreLoadingView,{region:this.photowallLayout.photowallFooterRegion}),this.loadCollectionNextPage()},onFilterSortChange:function(){i.isFalsy(this.photowallLayout.photowallFooterRegion)||this.photowallLayout.photowallFooterRegion.destroy(),this.resetCollection()},loadCollectionNextPage:function(){var e=this.collectionView.collection.getSelectedElements();this.collectionView.collection.nextPage({remove:!1}),i.each(e,(function(e){e.select()}))},resetCollection:function(){var e=this;this.collectionView.collection.remaining_count=void 0,this.collectionView.collection.trigger("count:change"),this.collectionView.$el.addClass("loading_content"),this.collectionView.collection.unSelectAll(),e.collectionView.collection.goTo(1,{reset:!0,success:function(o,t){e.collectionView.$el.removeClass("loading_content"),i.isFalsy(e.collectionView.collection._currentCriteria)||e.collectionView.collection.filterBy(e.collectionView.collection._currentCriteria,!0)}})}}),o.reqres.setHandler("photowall:wrapper",(function(o,t){if(t=t||{},!o.collection)throw new Error("No collection found inside of photowall's collectionView");return new e.Controller({view:o,config:t}).photowallLayout}))}))},82882:(e,o,t)=>{var i=t(54821).Z;Pixlee.module("Components.Photowall",(function(e,o,n,l,r){e.Layout=o.Views.Layout.extend({template:t(49781),id:"photos_container",regions:{photosRegion:"#photos_region",photowallFooterRegion:"#photowall_footer_region"},triggers:{"click #load_more":"load:more:clicked"},initialize:function(e){this.collectionView=e.collectionView;var o=i.debounce(this.onRender,500);this.collectionView.on("images:loaded",o,this),this.delegateEvents()},onRender:function(){if(this.collectionView.$el.css("opacity",1),!this.isDestroyed){var o=this.getRegion("photowallFooterRegion"),t=new e.LoadMoreButton;!this.collection.next||this.collection.length>1&&this.collection.length===this.collection.remaining_count?o&&o.currentView&&!o.currentView.isDestroyed&&o.currentView.destroy():(this.collection.next||this.collection.length>1&&"horizontal"!==this.collectionView.options.type&&this.collection.length<this.collection.remaining_count)&&(t.isDestroyed&&(t=new e.LoadMoreButton),o.show(t))}}}),e.LoadMoreButton=o.Views.ItemView.extend({template:t(4674)}),e.LoadMoreLoadingView=o.Views.ItemView.extend({template:t(6322)})}))},33714:(e,o,t)=>{var i={"./loading/loading_controller.js":96701,"./loading/loading_view.js":82318,"./photowall/photowall_controller.js":84974,"./photowall/photowall_views.js":82882};function n(e){var o=l(e);return t(o)}function l(e){if(!t.o(i,e)){var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=l,e.exports=n,n.id=33714},40509:()=>{Pixlee.module("Views",(function(e,o,t,i,n){e.CollectionView=i.CollectionView.extend({childViewEventPrefix:"child",showLoader:function(){!this.loaded&&this.collection.length>0&&0===n("#loader").length&&(this.loader=n('<div id="loading_container" />').append('<div id="loader" />'),this.$el.after(this.loader))},removeLoader:function(){this.loaded=!0,this.loader&&this.loader.remove()}})}))},45239:()=>{Pixlee.module("Views",(function(e,o,t,i,n){e.CompositeView=i.CompositeView.extend({childViewEventPrefix:"child"})}))},53592:()=>{Pixlee.module("Views",(function(e,o,t,i,n){e.ItemView=i.ItemView.extend({})}))},81249:()=>{Pixlee.module("Views",(function(e,o,t,i,n){e.Layout=i.LayoutView.extend({})}))},19708:(e,o,t)=>{"use strict";t.r(o);var i=t(10855),n=t(54821).Z;Pixlee.module("Views",(function(e,o,t,l,r){var s,a,c;s=l.View.prototype.remove,a=l.View,c=l.View.prototype.destroy,l.View=l.View.extend({addOpacityWrapper:function(e){return null==e&&(e=!0),this.$el.toggleWrapper({className:"opacity"},e)},setInstancePropertiesFor:function(){var e,o,t,l,r;for(o in e=1<=arguments.length?i.__slice.call(arguments,0):[],r=[],l=n.pick.apply(n,[this.options].concat(i.__slice.call(e))))t=l[o],r.push(this[o]=t);return r},remove:function(){var e,o,t,n=this;if(e=1<=arguments.length?i.__slice.call(arguments,0):[],!(null!=(t=this.model)&&"function"===typeof t.isDestroyed?t.isDestroyed():void 0))return s.apply(this,e);o=this.$el.toggleWrapper({className:"removing"}),setTimeout((function(){o.remove(),s.apply(n,e)}),350),this.$el.css({"-webkit-transform":"scale(0)","-moz-transform":"scale(0)","-ms-transform":"scale(0)","-o-transform":"scale(0)",transform:"scale(0)",opacity:"0"})},destroy:function(){var e;e=1<=arguments.length?i.__slice.call(arguments,0):[],t.ModelBinder&&this._modelBinder.unbind(),c.apply(this,e)},_modelBinder:void 0,constructor:function(){var e;e=1<=arguments.length?i.__slice.call(arguments,0):[],t.ModelBinder&&(this._modelBinder=new t.ModelBinder),a.apply(this,e)},configure:function(e){this.options&&(e=n.extend({},n.result(this,"options"),e)),this.options=e}})}))},95061:(e,o,t)=>{var i={"./collectionview.js":40509,"./compositeview.js":45239,"./itemview.js":53592,"./layout.js":81249,"./view.js":19708};function n(e){var o=l(e);return t(o)}function l(e){if(!t.o(i,e)){var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=l,e.exports=n,n.id=95061},13184:(e,o,t)=>{var i=t(54821).Z;!function(e){var o,t;t=e.sync,e.sync=function(e,n,l){var r;return l=l||{},i.defaults(l,{beforeSend:i.bind(o.beforeSend,n),complete:i.bind(o.complete,n)}),r=t(e,n,l),n._fetch||"read"!==e?r:n._fetch=r},o={beforeSend:function(){return this.trigger("sync:start",this)},complete:function(){return this.trigger("sync:stop",this)}}}(Backbone)},10702:(e,o,t)=>{var i=t(54821).Z,n=t(4002),l=t(4002);!function(e){if(e.fn.toggleWrapper=function(o,t){var n,l,r;return null==o&&(o={}),null==t&&(t=!0),i.defaults(o,{className:"",backgroundColor:"transparent"!==this.css("backgroundColor")?this.css("backgroundColor"):"white",zIndex:"auto"===this.css("zIndex")?1e3:Number(this.css("zIndex"))}),l=this.offset(),r=this.outerWidth(!1),n=this.outerHeight(!1),t?e("<div>").appendTo("body").addClass(o.className).attr("data-wrapper",!0).css({width:r,height:n,top:l.top,left:l.left,position:"absolute",zIndex:o.zIndex+1}):e("[data-wrapper]").remove()},!e.support.cors&&e.ajaxTransport&&window.XDomainRequest){var o=/^https?:\/\//i,t=/^get|post$/i,n=new RegExp("^"+location.protocol,"i"),l=/text\/html/i,r=/\/json/i,s=/\/xml/i;e.ajaxTransport("* text html xml json",(function(i,a,c){if(i.crossDomain&&i.async&&t.test(i.type)&&o.test(i.url)&&n.test(i.url)){var d=null,u=(a.dataType||"").toLowerCase();return{send:function(o,t){d=new XDomainRequest,/^\d+$/.test(a.timeout)&&(d.timeout=a.timeout),d.ontimeout=function(){t(500,"timeout")},d.onload=function(){var e="Content-Length: "+d.responseText.length+"\r\nContent-Type: "+d.contentType,o={code:200,message:"success"},i={text:d.responseText};try{if("html"===u||l.test(d.contentType))i.html=d.responseText;else if("json"===u||"text"!==u&&r.test(d.contentType))try{i.json=JSON.parse(d.responseText)}catch(a){o.code=500,o.message="parseerror"}else if("xml"===u||"text"!==u&&s.test(d.contentType)){var n=new ActiveXObject("Microsoft.XMLDOM");n.async=!1;try{n.loadXML(d.responseText)}catch(a){n=void 0}if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw o.code=500,o.message="parseerror","Invalid XML: "+d.responseText;i.xml=n}}catch(c){throw c}finally{t(o.code,o.message,i,e)}},d.onprogress=function(){},d.onerror=function(){t(500,"error",{text:d.responseText})};var n="";a.data&&(n="string"===e.type(a.data)?a.data:e.param(a.data)),d.open(i.type,i.url),d.send(n)},abort:function(){d&&d.abort()}}}}))}}(n),l.browser={},l.browser.msie=!1,l.browser.version=0,navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(l.browser.msie=!0,l.browser.version=RegExp.$1)},17939:(e,o,t)=>{const i=t(59050);i.isFalsy=function(e){return 0==e||""==e||null==e||"undefined"==e||void 0==e||NaN==e||"null"==e||"false"==e||0==e||"0"==e},i.isTruthy=function(e){return!this.isFalsy(e)}},46213:(e,o,t)=>{const i=t(59050);t.g._=i,i.templateSettings={interpolate:/\[\%\=(.+?)\%\]/gim,evaluate:/\[\%(.+?)\%\]/gim,escape:/\[\%\-(.+?)\%\]/gim}},61168:()=>{window.videojs&&(videojs.options.flash.swf="https://assets.pxlecdn.com/flash/video-js.swf")},27911:(e,o,t)=>{var i={"./backbone/sync.js":13184,"./javascript.js":10855,"./jquery.js":10702,"./underscore_mixin.js":17939,"./underscore_templating.js":46213,"./video.js":61168};function n(e){var o=l(e);return t(o)}function l(e){if(!t.o(i,e)){var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=l,e.exports=n,n.id=27911}}]);
//# sourceMappingURL=9669-b5bb11d7b279a3439b64.js.map