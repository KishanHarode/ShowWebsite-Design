(self.webpackChunkpixlee_photos=self.webpackChunkpixlee_photos||[]).push([[4420],{24420:(e,t,i)=>{"use strict";i.r(t);i(20164),i(90400),i(20188);var n=i(27713);n.keys().forEach(n)},96369:module=>{module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)"side_left"!==getLayoutClass()&&"side_right"!==getLayoutClass()||gon.isMobile?(__p+='\n\t<div id="widget_header_region"></div>\n\t<div id="interactive_region"></div>\n\t',checkSkipContentLinks()&&(__p+='\n\t\t<a class="screen_reader_only screen_reader_only_focus_visible skip_content_link" href="#carousel_end" id="carousel_start">'+(null==(__t=I18n.t("widget.screen_reader_only.carousel.skip_to_end"))?"":__t)+"</a>\n\t"),__p+='\n\t<div aria-label="'+(null==(__t=I18n.t("widget.screen_reader_only.carousel.label"))?"":__t)+'" class="wrap" id="horizontal_widget" role="region">\n\t\t',gon.isMobile||(__p+='\n\t\t\t<div class="controls">\n\t\t\t\t<button class="btn prev" aria-label="'+(null==(__t=I18n.t("common.controls.previous"))?"":__t)+'" title="'+(null==(__t=I18n.t("common.controls.previous"))?"":__t)+'"></button>\n\t\t\t\t<button class="btn next" aria-label="'+(null==(__t=I18n.t("common.controls.next"))?"":__t)+'" title="'+(null==(__t=I18n.t("common.controls.next"))?"":__t)+'"></button>\n\t\t\t</div>\n\t\t'),__p+='\n\t\t<div id="frame" class="horizontal_frame">\n\t\t</div>\n\t</div>\n'):(__p+='\n\t<div id="interactive_region"></div>\n\t<div id="widget_header_wrapper" class="'+(null==(__t=getLayoutClass())?"":__t)+'">\n\t\t<div id="widget_header_region"></div>\n\t\t',checkSkipContentLinks()&&(__p+='\n\t\t\t<a class="screen_reader_only screen_reader_only_focus_visible skip_content_link" href="#carousel_end" id="carousel_start">'+(null==(__t=I18n.t("widget.screen_reader_only.carousel.skip_to_end"))?"":__t)+"</a>\n\t\t"),__p+='\n\t\t<div aria-label="'+(null==(__t=I18n.t("widget.screen_reader_only.carousel.label"))?"":__t)+'" class="wrap" id="horizontal_widget" role="region">\n\t\t\t<div class="controls">\n\t\t\t\t<button class="btn prev" aria-label="'+(null==(__t=I18n.t("common.controls.previous"))?"":__t)+'" title="'+(null==(__t=I18n.t("common.controls.previous"))?"":__t)+'"></button>\n\t\t\t\t<button class="btn next" aria-label="'+(null==(__t=I18n.t("common.controls.next"))?"":__t)+'" title="'+(null==(__t=I18n.t("common.controls.next"))?"":__t)+'"></button>\n\t\t\t</div>\n\t\t\t<div id="frame" class="horizontal_frame">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n'),__p+="\n",checkSkipContentLinks()&&(__p+='\n\t<a class="screen_reader_only screen_reader_only_focus_visible skip_content_link skip_content_link_end" href="#carousel_start" id="carousel_end">'+(null==(__t=I18n.t("widget.screen_reader_only.carousel.skip_to_beginning"))?"":__t)+"</a>\n"),__p+="\n";return __p}},1888:()=>{Pixlee.module("HorizontalApp",(function(e,t,i,n,o){e.on("start",(function(t){new e.Show.Controller(t)}))}))},37086:(e,t,i)=>{var n=i(54821).Z;Pixlee.module("HorizontalApp.Show",(function(e,t,i,o,s){e.Controller=t.Controllers.Application.extend({initialize:function(i){var o,s,l,a=this,r=new e.Layout(i);(this.listenTo(r,"show",(function(){var n,l=t.request("get:photos:widget:photowall");(o=new e.HorizontalCollection({collection:l,displayOptions:i.display_options}),r.collection=l,l.on("sync",(function(e,n){if(a.widgetloaded)return!1;a.widgetloaded=!0,gon.sortType=n.sortType;var s=i.display_options.headerOptions.end_tile_upload_button_background_showHide;if(o.sly||s){var r=o.sly?o.sly.rel:{};t.commands.execute("opened:horizontal",r,l)}})),s=new e.HeaderView({model:t.request("get:current:album")}),this.show(o,{region:r.frame}),this.show(s,{region:r.widget_header_region}),i.display_options.is_interactive)&&(n=t.isMobile?t.request("get:navbar:mobile:view",i,l):t.request("get:navbar:view",i,l),this.show(n,{region:r.interactive_region}))})),gon.previewMode&&t.isDesktop)&&t.commands.setHandler("stylesheet:generated",(function(i,d){l=l||d.header_sponserImage_input,n.isFalsy(d.header_sponserImage_input)||(l=d.header_sponserImage_input,t.displayOptions.set("header_sponserImage_input",l),s=new e.HeaderView({model:t.request("get:current:album")}),a.show(s,{region:r.widget_header_region})),"250"!=d.widget_photoSize&&o.triggerMethod("reload:sly"),o.triggerMethod("stylesheet:generated")}));this.show(r,{loading:!0})}})}))},27821:(e,t,i)=>{var n=i(54821).Z;Pixlee.module("HorizontalApp.Show",(function(e,t,o,s,l){e.Layout=t.Views.Layout.extend({template:i(96369),regions:{widget_header_region:"#widget_header_region",interactive_region:"#interactive_region",frame:".horizontal_frame"}}),e.Layout.include(["LayoutHelpers","AccessibilityHelpers"]),e.PhotoView=t.Views.ItemView.extend({getTemplate:function(){var e=t.isDesktop&&gon.display_options&&gon.display_options.photoQuality||"default";return i("xl"===e||"original"===e?77445:50832)},className:"photo_block",tagName:"li",behaviors:{Reviews:{},Share:{},Vote:{},Lightbox:{},UpdateThumbnailCss:{}},initialize:function(){this.model.get("is_starred")&&this.$el.addClass("starred"),this.arrowNavigation=!1},templateHelpers:{decodeUtf8:function(e){return t.request("decode:utf8",e)}}}),e.PhotoView.include(["PhotoViewHelpers","ReviewHelpers"]),e.HorizontalCollection=t.Views.CollectionView.extend({childView:e.PhotoView,className:"clearfix",tagName:"ul",events:{keydown:"onKeydown",focusin:"onFocusin"},behaviors:function(){var e={CollectionVote:{}};t.isDesktop&&(e.RefreshOnCssGenerated={}),n.isFalsy(this.options.displayOptions.headerOptions)||(e.AppendUploaderTiles={});var i=n.isFalsy(this.options.displayOptions.headerOptions.end_tile_upload_button_background_showHide),o=!n.isFalsy(t.displayOptions.get("hideIfLessThan"))||!n.isFalsy(gon.current_account.extra_fields.hideIfLessThan);return(i||o)&&(e.HideEmptyAlbumWidget={}),e},initialize:function(){this.leftAlign=this.options.displayOptions.horizontalLayoutLeftAlign||!1,this.collection.reviewSelectionOptions={currentModelIndex:0},this.arrowNavigation=!1},onShow:function(){l("#widget").attr("alt",t.altText),t.isDesktop&&this.setNextPageListener()},onKeydown:function(e){var t=e.keyCode;if(37===t||39===t)37===t?this.sly.prev():this.sly.next(),this.arrowNavigation=!0;else if(9===t){if(this.arrowNavigation)e.preventDefault(),this.$el.find(".active .img_holder").get(0).focus();this.arrowNavigation=!1}},onFocusin:function(e){if(this.usedArrowButtons){e.preventDefault();var t=this.sly.rel.centerItem;this.$el.find(".img_holder").get(t).focus()}this.usedArrowButtons=!1},fetchNextPage:function(e){var t=this;this.isFetching=!0,this.collection.nextPage({success:function(i){i.next&&(l(".next").removeClass("disabled"),l(".next").prop("disabled",!1)),t.isFetching=!1,t.sly.reload({silentScroll:!0}),e&&e.call(t,t.sly.items[1].center,!0)}})},setNextPageListener:function(){l(".next, .prev").on("click",function(){this.navigateNextPage(!0)}.bind(this)),document.addEventListener("keydown",function(e){"Tab"===e.key&&this.navigateNextPage(!1)}.bind(this))},navigateNextPage:function(e){this.initialLoad=!1,1===this.collection.length&&(this.initialLoad=!0,this.fetchNextPage(this.sly.slideTo)),this.usedArrowButtons=e},getSlyOptions:function(){return{horizontal:1,smart:1,itemNav:this.leftAlign?"basic":"centered",activateOn:"click",activateMiddle:t.isDesktop?1:0,mouseDragging:t.isDesktop?0:1,touchDragging:1,releaseSwing:1,startAt:0,scrollBy:t.isMobile?1:0,speed:300,elasticBounds:1,easing:"easeOutExpo",prevPage:l(".prev"),nextPage:l(".next")}},forceCenterSly:function(e){var i=this,n=l(".horizontal_frame");this.isFetching=!1,this.initialLoad=!0;var o=this.getSlyOptions(e);o.itemNav="forceCentered",o.startAt=e;var s=this.setAccessibleElements.bind(this);this.sly=new Sly(n,o,{change:function(){var e=l(this)[0].pos;i.initialLoad||(e.dest>e.cur?t.commands.execute("nav:right",this.rel,i.collection):t.commands.execute("nav:left",this.rel,i.collection)),!i.initialLoad&&e.dest/e.end>.6&&!i.isFetching&&(i.fetchNextPage(),i.initialLoad=!0)},move:function(){s()}}).init(),this.setAccessibleElements()},onDragNav:function(e,i){var o=n.isFalsy(i)?"badEvent":i.type;Math.abs(e.cur-this.oldPosition)<200||["touchstart","touchend","touchmove","click"].indexOf(o)<0||(e.cur>this.oldPosition?t.commands.execute("nav:right",this.sly.rel,this.collection):t.commands.execute("nav:left",this.sly.rel,this.collection),this.oldPosition=e.cur)},initializeSly:function(){var e=this,i=n.debounce(this.onDragNav.bind(this),250),o=this.setAccessibleElements.bind(this);if(!this.sly&&this.collection.length){var s=l(".horizontal_frame");if(this.sly=new Sly(s,this.getSlyOptions(),{change:function(){var o=l(this)[0].pos;if(t.isDesktop&&!e.initialLoad){var s=o.dest>o.cur?"nav:right":"nav:left";t.commands.execute(s,this.rel,e.collection)}else{var a=n.isFalsy(typeof event)?null:event;i(o,a)}if(o.dest/o.end>.6&&!e.isFetching){if(t.isDesktop&&e.initialLoad)return;e.isFetching=!0,e.collection.nextPage({success:function(t){t.next&&(l(".next").removeClass("disabled"),l(".next").prop("disabled",!1)),e.isFetching=!1,e.sly.reload({silentScroll:!0})}})}},move:function(){o()},load:function(){if(this.loaded&&!this.widthAdjusted){var t=e.sly.items.length-1;if(t){var i=e.sly.items[t],n=i.start+i.size;l(this)[0].pos.end&&(l(".next").removeClass("disabled"),l(".next").prop("disabled",!1)),l("ul.clearfix").width(n),this.widthAdjusted=!0,e.sly.reload({silentScroll:!0})}}else this.loaded=!0}}).init(),this.sly.reload({silentScroll:!0}),this.setAccessibleElements(),t.isDesktop&&!gon.display_options.is_interactive&&n.isFalsy(this.options.displayOptions.headerOptions.end_tile_upload_button_background_showHide)&&!this.leftAlign)try{if(this.sly.items[this.sly.items.length-1].end<0){var a=Math.ceil(this.sly.items.length/2)-1;this.sly.destroy(),delete this.sly,this.forceCenterSly(a)}}catch(r){console.log(r)}}},onRender:function(){this.isFetching=!1,this.oldPosition=0,this.initialLoad=!0,this.sly&&(this.sly.destroy(),delete this.sly),this.initializeSly()}}),e.HorizontalCollection.include(["tabindexHelpers","designEditorCollectionHelpers","socialShareHelpers"]),e.HeaderView=t.Views.ItemView.extend({template:i(81486),id:"widget_header",behaviors:{Upload:{},ShowPdpCaption:{}}}),e.HeaderView.include(["StandaloneHeaderHelpers"])}))},27713:(e,t,i)=>{var n={"./horizontal_app.js":1888,"./horizontal_controller.js":37086,"./horizontal_views.js":27821};function o(e){var t=s(e);return i(t)}function s(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=s,e.exports=o,o.id=27713}}]);
//# sourceMappingURL=4420-a41cfdc0c8f607b7c612.js.map